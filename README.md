# ChatServer

## 项目简介
ChatServer 是一个基于 C++ 和 muduo 的分布式集群聊天系统，支持高并发通信和跨服务器消息同步。系统在 Nginx 负载均衡环境下稳定运行，采用 Redis 进行消息分发，MySQL 负责数据持久化，通信协议基于 JSON 设计。

---

## 技术栈
- **编程语言**：C++  
- **框架/库**：muduo、JSON  
- **数据库**：Redis、MySQL  
- **构建工具**：CMake、Shell 脚本  
- **负载均衡**：Nginx TCP  
- **开发环境**：VSCode 远程 Linux 开发  

---

## 编译与运行
```bash
cd build
rm -rf *
cmake ..
make
```

---

## 核心职责
- 使用 muduo 网络库搭建高并发网络通信核心模块，开发高性能网络 IO 服务，实现网络和业务模块的代码编写与调优。
- 设计并实现基于 JSON 序列化与反序列化的私有通信协议，确保客户端与服务器安全高效通信。
- 配置与优化 Nginx TCP 负载均衡，实现聊天服务器集群部署，提升系统的水平扩展能力。
- 利用 Redis 发布-订阅机制完成跨服务器消息通信，确保服务器间状态同步和即时消息分发。
- 设计 MySQL 关系型数据库存储方案，实现用户信息、聊天记录等核心数据的存储与管理。
- 通过数据库连接池优化数据库访问性能，减少数据库连接延迟，提升系统整体吞吐量。
- 编写自动化构建脚本和 CMake 构建系统，实现快速编译与持续集成。
- 进行服务器负载测试，通过 JMeter 测试并发极限，优化系统进程和文件描述符（fd）配置，提升系统并发能力。

---

## 项目亮点
- **分布式部署与扩展**：通过 Nginx 和 Redis 实现多服务器负载均衡和消息同步。
- **离线消息存储机制**：确保用户离线期间消息不丢失。
- **全链路 JSON 通信协议**：保障客户端与服务器间数据传输的高效性和安全性。
- **自动化构建与部署**：简化项目交付流程，提升开发效率与部署速度。

---

## 系统架构
```
客户端  <----->  Nginx (负载均衡)  <----->  多个 ChatServer 实例
                                 |             |
                                 |             |
                                Redis (消息分发) 
                                 |
                              MySQL (数据持久化)
```

---

## 测试与优化
- **负载测试**：通过 JMeter 模拟高并发场景，评估系统并发极限。
- **优化策略**：调整系统进程数与文件描述符数量，优化服务器资源配置。




